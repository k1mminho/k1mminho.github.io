---
layout: post
title: "íŒŒì´ì¬ ì‹œì‘í•´ë³´ê¸°"
date: 2025-03-28
desc: "3 Steps (2 minutes) to Setup Your Personal Website with Jalpc"
keywords: ""
categories: [HTML]
tags: []
icon: icon-html
---
ê·¸ëŸ¼ ì´ì œ FastAPI ì„œë²„ì— **Mediapipeë¥¼ ë¶™ì—¬ì„œ ì–¼êµ´ ëœë“œë§ˆí¬ë¥¼ ì¶”ì¶œí•˜ê³ , ì–¼êµ´í˜• ë¶„ì„ì„ ì¤€ë¹„**

---

## ğŸ¯ ëª©í‘œ  
ì—…ë¡œë“œëœ ì–¼êµ´ ì´ë¯¸ì§€ì—ì„œ Mediapipeë¡œ ì–¼êµ´ ëœë“œë§ˆí¬(468í¬ì¸íŠ¸)ë¥¼ ì¶”ì¶œ â†’ ë‚˜ì¤‘ì— ì–¼êµ´í˜• ë¶„ì„ìœ¼ë¡œ ì—°ê²°

---

## âœ… 1ë‹¨ê³„: í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜

```bash
pip install mediapipe opencv-python
```

---

## âœ… 2ë‹¨ê³„: FastAPI + Mediapipe ì˜ˆì œ ì½”ë“œ

### ğŸ“„ `main.py` (ê¸°ì¡´ì— ë®ì–´ì“°ê¸° or ìˆ˜ì •)

```python
from fastapi import FastAPI, UploadFile, File
from fastapi.responses import JSONResponse
import mediapipe as mp
import numpy as np
import cv2
import io

app = FastAPI()

mp_face_mesh = mp.solutions.face_mesh

@app.get("/")
def root():
    return {"message": "Mediapipe ì–¼êµ´ ë¶„ì„ ì„œë²„ ì‘ë™ ì¤‘"}

@app.post("/analyze_face")
async def analyze_face(file: UploadFile = File(...)):
    contents = await file.read()
    nparr = np.frombuffer(contents, np.uint8)
    img = cv2.imdecode(nparr, cv2.IMREAD_COLOR)

    # Mediapipe ì–¼êµ´ ë¶„ì„
    with mp_face_mesh.FaceMesh(
        static_image_mode=True,
        max_num_faces=1,
        refine_landmarks=True,
        min_detection_confidence=0.5
    ) as face_mesh:
        results = face_mesh.process(cv2.cvtColor(img, cv2.COLOR_BGR2RGB))

        if not results.multi_face_landmarks:
            return JSONResponse(content={"error": "ì–¼êµ´ì„ ê°ì§€í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤."})

        # ì²« ë²ˆì§¸ ì–¼êµ´ì˜ ëœë“œë§ˆí¬ ì¶”ì¶œ
        landmarks = results.multi_face_landmarks[0]
        points = [
            {"x": lm.x, "y": lm.y, "z": lm.z}
            for lm in landmarks.landmark
        ]

        # ì–¼êµ´í˜• ë¶„ì„ì€ ì—¬ê¸°ì„œ ì§„í–‰í•  ì˜ˆì •
        return {"landmark_count": len(points), "landmarks": points[:5]}  # ì²« 5ê°œë§Œ ì˜ˆì‹œë¡œ ë°˜í™˜
```

---

## âœ… 3ë‹¨ê³„: ì„œë²„ ì‹¤í–‰

```bash
uvicorn main:app --reload
```

---

## âœ… 4ë‹¨ê³„: Swaggerì—ì„œ í…ŒìŠ¤íŠ¸

- ì ‘ì†: [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs)
- `POST /analyze_face`ì—ì„œ ì–¼êµ´ ì‚¬ì§„ ì—…ë¡œë“œí•˜ë©´,
  - ëœë“œë§ˆí¬ ê°œìˆ˜(`468`) ì¶œë ¥
  - ì•ë¶€ë¶„ 5ê°œì˜ ì¢Œí‘œ ë¯¸ë¦¬ë³´ê¸° ì¶œë ¥

---

## âœ¨ ë‹¤ìŒ ë‹¨ê³„ë¡œ ê°ˆ ìˆ˜ ìˆëŠ” ì„ íƒì§€

1. ì–¼êµ´í˜• ë¶„ì„ (ê³„ì‚°ì‹ ê¸°ë°˜ or ë¨¸ì‹ ëŸ¬ë‹ ê¸°ë°˜)
2. ì–¼êµ´í˜•ì— ë”°ë¥¸ í—¤ì–´ìŠ¤íƒ€ì¼ ì¶”ì²œ
3. í—¤ì–´ìŠ¤íƒ€ì¼ ì´ë¯¸ì§€ í•©ì„± (OpenCV)
4. ëœë“œë§ˆí¬ ì‹œê°í™”ëœ ì´ë¯¸ì§€ ë°˜í™˜

---